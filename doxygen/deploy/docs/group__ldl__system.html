<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>LoraDeviceLib: System</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LoraDeviceLib</a>
   &#160;<span id="projectnumber">0.1.3+dd2db5b8955d67ec029d08340ba15147705c1857</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Function List</a> &#124;
<a href="#define-members">Macros</a>  </div>
  <div class="headertitle">
<div class="title">System<div class="ingroups"><a class="el" href="group__ldl.html">LDL</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Collaboration diagram for System:</div>
<div class="dyncontent">
<center><table><tr><td><img src="group__ldl__system.png" border="0" alt="" usemap="#group____ldl____system"/>
<map name="group____ldl____system" id="group____ldl____system">
<area shape="rect" id="node1" href="group__ldl.html" title="Below is a basic example of how to use LDL to join and then send data: " alt="" coords="5,5,52,32"/>
</map>
</td></tr></table></center>
</div>
<a name="details" id="details"></a><h2 class="groupheader">Description</h2>
<p>System interfaces. </p>
<p>LDL includes weak implementations for each of these functions. Different targets may or may not need to implement their own versions. </p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Function List</h2></td></tr>
<tr class="memitem:ga6c67ae1831610d02aa93b32f72bee4be"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ldl__system.html#ga6c67ae1831610d02aa93b32f72bee4be">LDL_System_time</a> (void)</td></tr>
<tr class="separator:ga6c67ae1831610d02aa93b32f72bee4be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0e4ad778455048179c7a99222ca3f16b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ldl__system.html#ga0e4ad778455048179c7a99222ca3f16b">LDL_System_getIdentity</a> (void *app, struct <a class="el" href="group__ldl__system.html#structlora__system__identity">lora_system_identity</a> *value)</td></tr>
<tr class="separator:ga0e4ad778455048179c7a99222ca3f16b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab71dd7dae39e2baede786719c2e24e1c"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ldl__system.html#gab71dd7dae39e2baede786719c2e24e1c">LDL_System_getBatteryLevel</a> (void *app)</td></tr>
<tr class="separator:gab71dd7dae39e2baede786719c2e24e1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga41c2b0cf645baf8911c875a7f8fcb717"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ldl__system.html#ga41c2b0cf645baf8911c875a7f8fcb717">LDL_System_rand</a> (void)</td></tr>
<tr class="separator:ga41c2b0cf645baf8911c875a7f8fcb717"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0b889c89640c79a9f6814842e827368f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ldl__system.html#ga0b889c89640c79a9f6814842e827368f">LDL_System_restoreContext</a> (void *app, struct <a class="el" href="group__ldl__mac.html#structlora__mac__session">lora_mac_session</a> *value)</td></tr>
<tr class="separator:ga0b889c89640c79a9f6814842e827368f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4b4d2dbfda4a26d2de9dab9e522672db"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ldl__system.html#ga4b4d2dbfda4a26d2de9dab9e522672db">LDL_System_saveContext</a> (void *app, const struct <a class="el" href="group__ldl__mac.html#structlora__mac__session">lora_mac_session</a> *value)</td></tr>
<tr class="separator:ga4b4d2dbfda4a26d2de9dab9e522672db"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga57e6e52b6275c0a43766756cace54259"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ldl__system.html#ga57e6e52b6275c0a43766756cace54259">LORA_SYSTEM_ENTER_CRITICAL</a>(APP)</td></tr>
<tr class="separator:ga57e6e52b6275c0a43766756cace54259"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3a93c0bc955a62e6712e2968f244e638"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ldl__system.html#ga3a93c0bc955a62e6712e2968f244e638">LORA_SYSTEM_LEAVE_CRITICAL</a>(APP)</td></tr>
<tr class="separator:ga3a93c0bc955a62e6712e2968f244e638"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Functions</h2>
<a class="anchor" id="ga6c67ae1831610d02aa93b32f72bee4be"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t LDL_System_time </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get system time (ticks) </p>
<dl class="section note"><dt>Note</dt><dd>system time must increment at a rate of <a class="el" href="group__ldl__optional.html#gab24d007fdea720fa935d5224105e0bb2" title="Redefine this to suit the System_time() source. ">LORA_TICKS_PER_SECOND</a> </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>this function must be implemented on target for correct operation</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>system time </dd></dl>

</div>
</div>
<a class="anchor" id="ga0e4ad778455048179c7a99222ca3f16b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void LDL_System_getIdentity </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>app</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="group__ldl__system.html#structlora__system__identity">lora_system_identity</a> *&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get AppEUI, DevEUI, and DevKey. </p>
<dl class="section warning"><dt>Warning</dt><dd>this function must be implemented on target for correct operation</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">app</td><td>application state </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">value</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gab71dd7dae39e2baede786719c2e24e1c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t LDL_System_getBatteryLevel </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>app</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get battery level. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">app</td><td>application state </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>battery level </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">255</td><td>not implemented </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga41c2b0cf645baf8911c875a7f8fcb717"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t LDL_System_rand </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a random number in range 0..255. </p>
<dl class="section return"><dt>Returns</dt><dd>random number in range 0..255 </dd></dl>

</div>
</div>
<a class="anchor" id="ga0b889c89640c79a9f6814842e827368f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool LDL_System_restoreContext </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>app</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="group__ldl__mac.html#structlora__mac__session">lora_mac_session</a> *&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Restore saved context. </p>
<dl class="section note"><dt>Note</dt><dd>called only once during <a class="el" href="group__ldl__mac.html#gadaccbebc6539ccb3f979601c90775865" title="Initialise MAC. ">LDL_MAC_init</a></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">app</td><td>application state </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">value</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>if context was restored </td></tr>
    <tr><td class="paramname">false</td><td>MAC will restore session from defaults </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga4b4d2dbfda4a26d2de9dab9e522672db"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void LDL_System_saveContext </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>app</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="group__ldl__mac.html#structlora__mac__session">lora_mac_session</a> *&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Save context. </p>
<dl class="section note"><dt>Note</dt><dd>This will be called by MAC every time a member in <a class="el" href="group__ldl__mac.html#structlora__mac__session" title="session parameter cache ">lora_mac_session</a> changes</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">app</td><td></td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">value</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/><h2 class="groupheader">Data Structure Documentation</h2>
<a name="structlora__system__identity" id="structlora__system__identity"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct lora_system_identity</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>identifiers and application key </p>
</div><table class="memberdecls">
<tr><td colspan="2"><h3>Data Fields</h3></td></tr>
<tr class="memitem:a1759d2562f7327473e5c22409bf678f5"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ldl__system.html#a1759d2562f7327473e5c22409bf678f5">appEUI</a> [8U]</td></tr>
<tr class="separator:a1759d2562f7327473e5c22409bf678f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c79de18e8c8492eeb521c580f554876"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ldl__system.html#a7c79de18e8c8492eeb521c580f554876">devEUI</a> [8U]</td></tr>
<tr class="separator:a7c79de18e8c8492eeb521c580f554876"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec0bb1925cbfed990ed6e0eaf747c33c"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ldl__system.html#aec0bb1925cbfed990ed6e0eaf747c33c">appKey</a> [16U]</td></tr>
<tr class="separator:aec0bb1925cbfed990ed6e0eaf747c33c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h4 class="groupheader">Field Documentation</h4>
<a class="anchor" id="a1759d2562f7327473e5c22409bf678f5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t lora_system_identity::appEUI[8U]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>application identifier </p>

</div>
</div>
<a class="anchor" id="a7c79de18e8c8492eeb521c580f554876"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t lora_system_identity::devEUI[8U]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>device identifier </p>

</div>
</div>
<a class="anchor" id="aec0bb1925cbfed990ed6e0eaf747c33c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t lora_system_identity::appKey[16U]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>application key </p>

</div>
</div>

</div>
</div>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ga57e6e52b6275c0a43766756cace54259"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LORA_SYSTEM_ENTER_CRITICAL</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">APP</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Expanded inside functions which might be called from both mainloop and interrupt. </p>
<p>Always paired with <a class="el" href="group__ldl__system.html#ga3a93c0bc955a62e6712e2968f244e638" title="Expanded inside functions which might be called from both mainloop and interrupt. ...">LORA_SYSTEM_LEAVE_CRITICAL</a> within the same function like so:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;void LDL_Event_xxx(void *app)</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;{</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;     LORA_SYSTEM_ENTER_CRITICAL(app)</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;     // critical section code</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;     LORA_SYSTEM_LEAVE_CRITICAL(app)</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;}</div></div><!-- fragment --><p>Note that there are no semicolons following the macro when it appears in LDL. This means if you are using avr-libc you are free to insert the ATOMIC_BLOCK macro like so:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;#include &lt;util/atomic.h&gt;</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;#define LORA_SYSTEM_ENTER_CRITICAL(APP) ATOMIC_BLOCK(ATOMIC_RESTORESTATE){</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;#define LORA_SYSTEM_ENTER_CRITICAL(APP) }</div></div><!-- fragment --><p>If undefined a warning will be produced and no code will be inserted around critical sections.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">app</td><td>application state </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga3a93c0bc955a62e6712e2968f244e638"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LORA_SYSTEM_LEAVE_CRITICAL</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">APP</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Expanded inside functions which might be called from both mainloop and interrupt. </p>
<p>Always paired with <a class="el" href="group__ldl__system.html#ga57e6e52b6275c0a43766756cace54259" title="Expanded inside functions which might be called from both mainloop and interrupt. ...">LORA_SYSTEM_ENTER_CRITICAL</a> within the same function. See <a class="el" href="group__ldl__system.html#ga57e6e52b6275c0a43766756cace54259" title="Expanded inside functions which might be called from both mainloop and interrupt. ...">LORA_SYSTEM_ENTER_CRITICAL</a> for example.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">app</td><td>application state </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"></address>
</body>
</html>
